<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Store</title>
    <style>
        body { font-family: sans-serif; background: #f4f4f4; margin: 0; padding: 20px; }
        
        /* PAGE 1 : CATALOGUE */
        #view-catalog {
            display: grid;
            grid-template-columns: 1fr 1fr; /* 2 colonnes côte à côte */
            gap: 15px;
            max-width: 800px;
            margin: 0 auto;
        }

        .card {
            background: white;
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .card img { width: 100%; height: 150px; object-fit: cover; border-radius: 5px; }
        
        .btn-black {
            background: black;
            color: white;
            border: none;
            padding: 10px;
            width: 100%;
            border-radius: 20px;
            cursor: pointer;
            margin-top: 10px;
            font-weight: bold;
        }

        /* PAGE 2 : DÉTAIL PRODUIT */
        #view-detail {
            display: none; /* CACHÉ PAR DÉFAUT */
            background: white;
            max-width: 400px;
            margin: 0 auto;
            padding: 20px;
            border-radius: 15px;
        }

        #detail-img { width: 100%; border-radius: 10px; }
        
        .back-link { color: blue; cursor: pointer; text-decoration: underline; display: block; margin-bottom: 10px; }
        
        .desc { font-size: 0.9rem; color: #555; background: #eee; padding: 10px; border-radius: 5px; margin: 15px 0; }

        .price-big { font-size: 2rem; color: green; font-weight: bold; margin: 15px 0; text-align: center; }

        select { width: 100%; padding: 10px; margin-bottom: 10px; }
    </style>
</head>
<body>

    <div id="view-catalog">
        <div class="card">
            <img src="https://res.cloudinary.com/dar9eevt3/image/upload/w_800,h_800,c_pad,b_white,f_auto,q_auto/v1/6008185598566842990_121_kzeeym">
            <h3>Tramadol</h3>
            <p>100€ - 10,080€</p>
            <button class="btn-black" onclick="openProduct('tramadol')">Sélectionner</button>
        </div>

        <div class="card">
            <img src="https://res.cloudinary.com/dar9eevt3/image/upload/w_800,h_800,c_pad,b_white,f_auto,q_auto/v1/-5897686531106260347_121_r01qi4">
            <h3>Xanax</h3>
            <p>100€ - 2,000€</p>
            <button class="btn-black" onclick="openProduct('xanax')">Sélectionner</button>
        </div>
    </div>

    <div id="view-detail">
        <span class="back-link" onclick="closeProduct()">← Retour au catalogue</span>
        
        <img id="detail-img" src="">
        <h2 id="detail-title"></h2>
        
        <div class="desc" id="detail-desc"></div>

        <label>Dosage :</label>
        <select id="sel-dose" onchange="updateQty()"></select>

        <label>Quantité :</label>
        <select id="sel-qty" disabled onchange="updatePrice()"></select>

        <div id="price-area" style="display:none">
            <div class="price-big"><span id="final-p">0</span>€</div>
            <button class="btn-black" style="background:green">AJOUTER AU PANIER</button>
        </div>
    </div>

    <script>
        const db = {
            tramadol: {
                name: "Tramadol",
                img: "https://res.cloudinary.com/dar9eevt3/image/upload/w_800,h_800,c_pad,b_white,f_auto,q_auto/v1/6008185598566842990_121_kzeeym",
                desc: "Le tramadol est un analgésique central qui se fixe aux récepteurs opioïdes du cerveau pour soulager la douleur.",
                prices: {
                    "50mg": { "20": 100, "1000": 3200 },
                    "100mg": { "20": 120, "1000": 5200 }
                }
            },
            xanax: {
                name: "Xanax / Farmapram",
                img: "https://res.cloudinary.com/dar9eevt3/image/upload/w_800,h_800,c_pad,b_white,f_auto,q_auto/v1/-5897686531106260347_121_r01qi4",
                desc: "Xanax apaise le système nerveux en agissant sur les récepteurs GABA, induisant un effet calmant rapide.",
                prices: {
                    "1mg": { "90": 100, "1500": 1200 },
                    "2mg": { "90": 200, "1500": 2000 }
                }
            }
        };

        let currentId = "";

        function openProduct(id) {
            currentId = id;
            const p = db[id];

            // On remplit les infos
            document.getElementById('detail-title').innerText = p.name;
            document.getElementById('detail-img').src = p.img;
            document.getElementById('detail-desc').innerText = p.desc;

            // On remplit les dosages
            const doseSel = document.getElementById('sel-dose');
            doseSel.innerHTML = '<option value="">-- Choisir --</option>';
            for(let d in p.prices) {
                doseSel.innerHTML += `<option value="${d}">${d}</option>`;
            }

            // On cache le catalogue et on montre le détail
            document.getElementById('view-catalog').style.display = 'none';
            document.getElementById('view-detail').style.display = 'block';
            window.scrollTo(0,0);
        }

        function closeProduct() {
            // On fait l'inverse : montre catalogue, cache détail
            document.getElementById('view-catalog').style.display = 'grid';
            document.getElementById('view-detail').style.display = 'none';
        }

        function updateQty() {
            const dose = document.getElementById('sel-dose').value;
            const qtySel = document.getElementById('sel-qty');
            qtySel.innerHTML = '<option value="">-- Choisir --</option>';
            
            if(dose) {
                qtySel.disabled = false;
                const qtys = db[currentId].prices[dose];
                for(let q in qtys) {
                    qtySel.innerHTML += `<option value="${q}">${q} unités</option>`;
                }
            } else { qtySel.disabled = true; }
            document.getElementById('price-area').style.display = 'none';
        }

        function updatePrice() {
            const dose = document.getElementById('sel-dose').value;
            const qty = document.getElementById('sel-qty').value;
            if(dose && qty) {
                const price = db[currentId].prices[dose][qty];
                document.getElementById('final-p').innerText = price;
                document.getElementById('price-area').style.display = 'block';
            }
        }
    </script>
</body>
</html>
